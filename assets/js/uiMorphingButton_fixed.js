!function(n){"use strict";function t(n,t){for(var e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}function e(n,e){this.el=n,this.options=t({},this.options),t(this.options,e),this._init()}var o={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"},i=o[Modernizr.prefixed("transition")],s={transitions:Modernizr.csstransitions};e.prototype.options={closeEl:"",onBeforeOpen:function(){return!1},onAfterOpen:function(){return!1},onBeforeClose:function(){return!1},onAfterClose:function(){return!1}},e.prototype._init=function(){this.button=this.el.querySelector("button"),this.expanded=!1,this.contentEl=this.el.querySelector(".morph-content"),this._initEvents()},e.prototype._initEvents=function(){var n=this;if(this.button.addEventListener("click",function(){n.toggle()}),""!==this.options.closeEl){var t=this.el.querySelector(this.options.closeEl);t&&t.addEventListener("click",function(){n.toggle()})}},e.prototype.toggle=function(){if(this.isAnimating)return!1;this.expanded?this.options.onBeforeClose():(classie.addClass(this.el,"active"),this.options.onBeforeOpen()),this.isAnimating=!0;var n=this,t=function(e){if(e.target!==this)return!1;if(s.transitions){if(n.expanded&&"opacity"!==e.propertyName||!n.expanded&&"width"!==e.propertyName&&"height"!==e.propertyName&&"left"!==e.propertyName&&"top"!==e.propertyName)return!1;this.removeEventListener(i,t)}n.isAnimating=!1,n.expanded?(classie.removeClass(n.el,"active"),n.options.onAfterClose()):n.options.onAfterOpen(),n.expanded=!n.expanded};s.transitions?this.contentEl.addEventListener(i,t):t();var e=this.button.getBoundingClientRect();classie.addClass(this.contentEl,"no-transition"),this.contentEl.style.left="auto",this.contentEl.style.top="auto",setTimeout(function(){n.contentEl.style.left=e.left+"px",n.contentEl.style.top=e.top+"px",n.expanded?(classie.removeClass(n.contentEl,"no-transition"),classie.removeClass(n.el,"open")):setTimeout(function(){classie.removeClass(n.contentEl,"no-transition"),classie.addClass(n.el,"open")},25)},25)},n.UIMorphingButton=e}(window),function(n){"use strict";function t(n){return new RegExp("(^|\\s+)"+n+"(\\s+|$)")}function e(n,t){var e=o(n,t)?s:i;e(n,t)}var o,i,s;"classList"in document.documentElement?(o=function(n,t){return n.classList.contains(t)},i=function(n,t){n.classList.add(t)},s=function(n,t){n.classList.remove(t)}):(o=function(n,e){return t(e).test(n.className)},i=function(n,t){o(n,t)||(n.className=n.className+" "+t)},s=function(n,e){n.className=n.className.replace(t(e)," ")});var r={hasClass:o,addClass:i,removeClass:s,toggleClass:e,has:o,add:i,remove:s,toggle:e};"function"==typeof define&&define.amd?define(r):n.classie=r}(window),function(){function n(){window.scrollTo(a?a.x:0,a?a.y:0)}function t(){window.removeEventListener("scroll",i),window.addEventListener("scroll",n)}function e(){window.addEventListener("scroll",i)}function o(){window.removeEventListener("scroll",n),e()}function i(){r||(r=!0,setTimeout(function(){s()},60))}function s(){a={x:window.pageXOffset||l.scrollLeft,y:window.pageYOffset||l.scrollTop},r=!1}var r,a,l=window.document.documentElement;e();var c=document.querySelector(".morph-button");new UIMorphingButton(c,{closeEl:".icon-close",onBeforeOpen:function(){t()},onAfterOpen:function(){o(),classie.addClass(document.body,"noscroll"),classie.addClass(c,"scroll")},onBeforeClose:function(){classie.removeClass(document.body,"noscroll"),classie.removeClass(c,"scroll"),t()},onAfterClose:function(){o()}})}();
